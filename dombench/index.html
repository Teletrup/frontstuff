<body>
  <script>
    function bottomUp() {
      let el = document.createElement('div');
      for (let i=0; i<1000; i++) {
        let _el = document.createElement('div');
        _el.appendChild(el);
        el = _el;
      }
      document.body.appendChild(el);
    }

    function topDownEmptyBefore() {
      let root = document.createElement('div');
      document.body.appendChild(root);
      let el = root;
      for (let i=0; i<1000; i++) {
        let _el = document.createElement('div');
        el.appendChild(_el);
        el = _el; 
      }
      //el.appendChild(document.createTextNode('top down empty attached'));
    }

    function topDownEmptyAfter() {
      let root = document.createElement('div');
      let el = root;
      for (let i=0; i<1000; i++) {
        let _el = document.createElement('div');
        el.appendChild(_el);
        el = _el; 
      }
      document.body.appendChild(root);
      //el.appendChild(document.createTextNode('top down empty attached'));
    }


    function flatEmptyBefore() {
      let root = document.createElement('div');
      document.body.appendChild(root);
      root.appendChild(document.createTextNode('foo'));
      for (let i=0; i<100000; i++) {
        root.appendChild(document.createElement('div'));
      }
    }

    function flatEmptyAfter() {
      let root = document.createElement('div');
      root.appendChild(document.createTextNode('foo'));
      for (let i=0; i<100000; i++) {
        root.appendChild(document.createElement('div'));
      }
      document.body.appendChild(root);
      //document.body.appendChild(document.createTextNode('flat attached'));
    }


    function justCreatingText() {
      for (let i=0; i<1e7; i++) {
        document.createTextNode('foo');
      }
    }
    function justCreatingDivs() {
      for (let i=0; i<1e7; i++) {
        document.createElement('div');
      }
    }

    //bottomUp();

    //topDownEmptyAfter();
    topDownEmptyBefore();

    //flatEmptyBefore();
    //flatEmptyAfter();
  </script>
</body>
